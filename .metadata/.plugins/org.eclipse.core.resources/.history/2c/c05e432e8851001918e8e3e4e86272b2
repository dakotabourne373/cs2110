import java.util.Collections;
import javax.swing.*;
import java.awt.*;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import java.io.File;

import javax.imageio.ImageIO;

public class PhotoViewer extends JFrame {
	private PhotographContainer imageAlbum;
	private JPanel thumbnails, fullImage, topMenuBar, ratingsBar;

	public PhotoViewer() {
		this.imageAlbum = new PhotoLibrary("Test Library", 1);

	}

	public void createAndShowGUI() {
		thumbnails = new JPanel(new GridLayout(0, 1, 0, 0));
		topMenuBar = new JPanel(new FlowLayout());
		ratingsBar = new JPanel(new FlowLayout());
		fullImage = new JPanel();


		// what to do when closing
		this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

		// a title
		this.setTitle("Photo Viewer v0.1");

		//setting up the Menu Bar along the top, including the buttons
		topMenuBar.setSize(new Dimension());
		topMenuBar.setBorder(BorderFactory.createLineBorder(Color.BLACK));

		JButton exit = new JButton("Exit");
		JButton sortByDate = new JButton("Sort-By-Date");
		JButton sortByCaption = new JButton("Sort-By-Caption");
		JButton sortByRating = new JButton("Sort-By-Rating");

		topMenuBar.add(exit);
		topMenuBar.add(sortByRating);
		topMenuBar.add(sortByCaption);
		topMenuBar.add(sortByDate);

		//setting up the radio button bar
		ratingsBar.setBorder(BorderFactory.createLineBorder(Color.BLACK));
		System.out.println(ratingsBar.getAlignmentX());
		System.out.println(ratingsBar.getAlignmentY());
		ratingsBar.setAlignmentY((float) 0.2);

		JLabel rating = new JLabel("Rate it yourself!");
		JLabel iterating = new JLabel("Go through the list one-by-one: ");
		JRadioButton one = new JRadioButton("1");
		JRadioButton two = new JRadioButton("2");
		JRadioButton three = new JRadioButton("3");
		JRadioButton four = new JRadioButton("4");
		JRadioButton five = new JRadioButton("5");
		JButton next = new JButton("Next >");
		JButton previous = new JButton("< Previous");
		ButtonGroup bg = new ButtonGroup();
		bg.add(one);
		bg.add(two);
		bg.add(three);
		bg.add(four);
		bg.add(five);
		ratingsBar.add(rating);
		ratingsBar.add(one);
		ratingsBar.add(two);
		ratingsBar.add(three);
		ratingsBar.add(four);
		ratingsBar.add(five);
		ratingsBar.add(iterating);
		ratingsBar.add(previous);
		ratingsBar.add(next);

		//TO-DO: Action performed with each radio button

		//TO-DO: Action performed with the next and previous buttons


		int height = (int)Toolkit.getDefaultToolkit().getScreenSize().getHeight();
		int width = (int)Toolkit.getDefaultToolkit().getScreenSize().getWidth();
		this.setSize(width/2, height/2);
		this.getContentPane().setLayout(new BorderLayout());

		try {
			for (Photograph p: this.imageAlbum.photos) {
				BufferedImage picture = ImageIO.read(p.getImageFile());
				JLabel picLabel = new JLabel();
				picLabel.setText(p.getCaption() + ", " + p.getDateTaken() + ", " + p.getRating());
				picLabel.setIcon(new ImageIcon(picture.getScaledInstance(picture.getWidth()/20, picture.getHeight() /20, 2)));
				picLabel.setMaximumSize(new Dimension(50,25));
				picLabel.setBorder(BorderFactory.createLineBorder(Color.BLACK));
				picLabel.addMouseListener(new MouseAdapter() {
					public void mouseClicked(MouseEvent e) {
						fullImage.removeAll();
						picLabel.setIcon(new ImageIcon(picture.getScaledInstance(picture.getWidth()/5, picture.getHeight() /5, 2)));
						fullImage.add(picLabel);

					}
				}

						);

				thumbnails.add(picLabel);

			}
			this.getContentPane().add(thumbnails, BorderLayout.WEST);
			this.getContentPane().add(fullImage, BorderLayout.CENTER);
			this.getContentPane().add(ratingsBar, BorderLayout.SOUTH);
			this.getContentPane().add(topMenuBar, BorderLayout.NORTH);

			this.getContentPane().revalidate();
			this.getContentPane().repaint();

		} catch (Exception e) {
			System.out.println("Something went wrong, oopsie: " + e.getMessage());
			e.printStackTrace();
		}

		setVisible(true);
	}

	public void getImages() {
		
		Photograph pic1 = this.imageAlbum.photos.get(0);
		Photograph pic2 = this.imageAlbum.photos.get(1);
		Photograph pic3 = this.imageAlbum.photos.get(2);
		Photograph pic4 = this.imageAlbum.photos.get(3);
		Photograph pic5 = this.imageAlbum.photos.get(4);

		try {
		//setting up image 1
		BufferedImage p1 = ImageIO.read(pic1.getImageFile());
		JLabel picLabel1 = new JLabel();
		picLabel1.setText(pic1.getCaption() + ", " + pic1.getDateTaken() + ", " + pic1.getRating());
		picLabel1.setIcon(new ImageIcon(p1.getScaledInstance(p1.getWidth()/20, p1.getHeight() /20, 2)));
		picLabel1.setMaximumSize(new Dimension(50,25));
		picLabel1.setBorder(BorderFactory.createLineBorder(Color.BLACK));
		picLabel1.addMouseListener(new MouseAdapter() {
			public void mouseClicked(MouseEvent e) {
				fullImage.removeAll();
				picLabel1.setIcon(new ImageIcon(p1.getScaledInstance(p1.getWidth()/5, p1.getHeight() /5, 2)));
				fullImage.add(picLabel1);
			}
		});
		//setting up image 2
		BufferedImage p2 = ImageIO.read(pic2.getImageFile());
		JLabel picLabel2 = new JLabel();
		picLabel2.setText(pic2.getCaption() + ", " + pic2.getDateTaken() + ", " + pic2.getRating());
		picLabel2.setIcon(new ImageIcon(p2.getScaledInstance(p2.getWidth()/20, p2.getHeight() /20, 2)));
		picLabel2.setMaximumSize(new Dimension(50,25));
		picLabel2.setBorder(BorderFactory.createLineBorder(Color.BLACK));
		picLabel2.addMouseListener(new MouseAdapter() {
			public void mouseClicked(MouseEvent e) {
				fullImage.removeAll();
				picLabel2.setIcon(new ImageIcon(p2.getScaledInstance(p2.getWidth()/5, p2.getHeight() /5, 2)));
				fullImage.add(picLabel2);
			}
		});
		//setting up image 3
				BufferedImage p3 = ImageIO.read(pic3.getImageFile());
				JLabel picLabel3 = new JLabel();
				picLabel3.setText(pic3.getCaption() + ", " + pic3.getDateTaken() + ", " + pic3.getRating());
				picLabel3.setIcon(new ImageIcon(p3.getScaledInstance(p3.getWidth()/20, p3.getHeight() /20, 2)));
				picLabel3.setMaximumSize(new Dimension(50,25));
				picLabel3.setBorder(BorderFactory.createLineBorder(Color.BLACK));
				picLabel3.addMouseListener(new MouseAdapter() {
					public void mouseClicked(MouseEvent e) {
						fullImage.removeAll();
						picLabel3.setIcon(new ImageIcon(p3.getScaledInstance(p3.getWidth()/5, p3.getHeight() /5, 2)));
						fullImage.add(picLabel3);
					}
				});
		}catch (Exception e) {
			System.out.println(e.getMessage());
			e.printStackTrace();
		}
	}

	public static void main(String[] args) {
		PhotoViewer myViewer = new PhotoViewer();

		// relative path for PCs:
		String imageDirectory = "images\\";

		Photograph p1 = new Photograph(imageDirectory + "image1.png", "chung bigus", "2016-05-25", 1);
		Photograph p2 = new Photograph(imageDirectory + "image2.jpg", "Nyananananan", "2017-07-21", 4);
		Photograph p3 = new Photograph(imageDirectory + "image3.jpg", "minions lol", "2014-03-04", 2);
		Photograph p4 = new Photograph(imageDirectory + "image4.jpg", "spoderman", "2018-06-16", 3);
		Photograph p5 = new Photograph(imageDirectory + "image5.png", "corn", "2019-03-26", 5);

		// four more photographs like the line above
		myViewer.imageAlbum = new PhotoLibrary("Test Library", 1);

		myViewer.imageAlbum.addPhoto(p1);
		myViewer.imageAlbum.addPhoto(p2);
		myViewer.imageAlbum.addPhoto(p3);
		myViewer.imageAlbum.addPhoto(p4);
		myViewer.imageAlbum.addPhoto(p5);

		// four more photographs added like the line above
		Collections.sort(myViewer.imageAlbum.photos);

		javax.swing.SwingUtilities.invokeLater(new Runnable() {
			public void run() {
				myViewer.createAndShowGUI();
			}
		}
				);


	}
}

